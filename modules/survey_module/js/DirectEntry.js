(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=100)})({100:function(module,exports,__webpack_require__){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _DirectEntryForm=__webpack_require__(101);var _DirectEntryForm2=_interopRequireDefault(_DirectEntryForm);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var DirectEntry=function(_React$Component){_inherits(DirectEntry,_React$Component);_createClass(DirectEntry,null,[{key:"findSelects",value:function findSelects(root){var _ref;return(_ref=[]).concat.apply(_ref,_toConsumableArray(root)).filter(function(i){return i.Type=="select"||i.Type=="ElementGroup"}).reduce(function(memo,i){if(i.Type=="select"){memo[i.Name]=i.Options.Values}else{Object.assign(memo,DirectEntry.findSelects(i.Elements))}return memo},{})}}]);function DirectEntry(props){_classCallCheck(this,DirectEntry);var _this=_possibleConstructorReturn(this,(DirectEntry.__proto__||Object.getPrototypeOf(DirectEntry)).call(this,props));var height=window.innerHeight/3;var style={"margin-top":height};var page=-1;var url=window.location;if(!window.location.origin){url.origin=url.protocol+"//"+url.hostname+(url.port?":"+url.port:"")}_this.nextPage=_this.nextPage.bind(_this);_this.prevPage=_this.prevPage.bind(_this);_this.updateAnswer=_this.updateAnswer.bind(_this);_this.setupPageValues=_this.setupPageValues.bind(_this);_this.submit=_this.submit.bind(_this);_this.state={style,page,values:{},errors:{},InstrumentJSON:{},completionStats:{total:0,completed:0},api_url:url.origin+"/survey_module/ajax/survey_api.php"+url.search,submitState:0};return _this}_createClass(DirectEntry,[{key:"componentWillMount",value:function componentWillMount(){var _this2=this;$.ajax({url:this.state.api_url,method:"GET",dataType:"json",success:function(data){var InstrumentJSON=JSON.parse(data.InstrumentJSON);var Values=JSON.parse(data.Values);var page=-1;if(InstrumentJSON.Elements[0].Type==="ElementGroup"&&InstrumentJSON.Elements[0].GroupType==="Page"){page=0}var total=0;var completed=0;for(var key in Values){if(Values.hasOwnProperty(key)){if(Values[key]!=null&&Values[key]!=""){completed++}total++}}this.setState({values:Values,InstrumentJSON,page,completionStats:{total,completed}},this.setupPageValues.bind(this,page))}.bind(this)}).fail(function(responseData){console.log(responseData.status);if(responseData.status=="403"){_this2.setState({submitState:2})}})}},{key:"setupPageValues",value:function setupPageValues(page){if(page>=this.state.InstrumentJSON.Elements.length||page<0){return}var pageElements=this.state.InstrumentJSON.Elements[page].Elements;var pageValues={};for(var i=0;i<pageElements.length;i++){var name=this.getElementName(pageElements[i]);if(name instanceof Array){for(var j=0;j<name.length;j++){if(name[j]in this.state.values){pageValues[name[j]]=this.state.values[name[j]]}}}else if(name in this.state.values){pageValues[name]=this.state.values[name]}}this.setState({pageValues})}},{key:"getElementName",value:function getElementName(element){var name=void 0;if(element.Type==="ElementGroup"){name=[];for(var i=0;i<element.Elements.length;i++){name.push(this.getElementName(element.Elements[i]))}}else{name=element.Name}return name}},{key:"removeHeaderTags",value:function removeHeaderTags(str){if(typeof str=="string"){return str.replace(/<h.>/g,"").replace(/<\/h.>/g,"")}else{return""}}},{key:"nextPage",value:function nextPage(){var _this3=this;var page=0;var finalPage=false;if(this.state.page!=0){page=this.state.InstrumentJSON.Elements[this.state.page].Subtest}var data={data:this.state.pageValues,page};var that=this;if(this.state.page===this.state.InstrumentJSON.Elements.length-1){data["FinalPage"]=true;finalPage=true}$.ajax({url:this.state.api_url,data:JSON.stringify(data),type:"PUT",contentType:"application/json",success:function success(result){var page=that.state.page+1;var InstrumentJSON=void 0;var reviewPage=void 0;if(finalPage){InstrumentJSON=that.state.InstrumentJSON;reviewPage=JSON.parse(result)}else{InstrumentJSON=JSON.parse(result)}if(reviewPage!=undefined){var selects=DirectEntry.findSelects(InstrumentJSON.Elements.map(function(i){return i.Elements}));var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=reviewPage.questions[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var i=_step.value;var options=selects[i.SourceField];if(options!=undefined){var value=options[i.response];if(value!=undefined){i.response=value}}i.question=_this3.removeHeaderTags(i.question)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}that.setState({page,errors:{},InstrumentJSON,ReviewData:reviewPage});that.setupPageValues(page);window.scrollTo(0,0)}}).fail(function(responseData){if(responseData.status===400){var response=JSON.parse(responseData.responseText);_this3.setState({errors:response});swal({title:"Error",text:"Please resolve page errors before continuing"},function(e){$("html, body").animate({scrollTop:$($(".questionError")[0]).offset().top-100},100)})}})}},{key:"prevPage",value:function prevPage(){var page=this.state.page-1;this.setState({page,errors:{}});this.setupPageValues(page);window.scrollTo(0,0)}},{key:"updateAnswer",value:function updateAnswer(fieldName,value){var data={};data[fieldName]=value;$.ajax({url:this.state.api_url,data:JSON.stringify(data),type:"PATCH",contentType:"application/json"});this.setState(function(state){var values=state.values;var pageValues=state.pageValues;var stats=state.completionStats;if(values[fieldName]==null||values[fieldName]==""){stats.completed=stats.completed+1}else if(value==null||value==""){stats.completed=stats.completed-1}values[fieldName]=value;pageValues[fieldName]=value;return{values,pageValues,completionStats:stats}})}},{key:"submit",value:function submit(){var _this4=this;var that=this;$.ajax({url:this.state.api_url,type:"POST",contentType:"application/json",success:function success(result){that.setState({submitState:1})}}).fail(function(responseData){console.log("FAIL");console.log(responseData);_this4.setState({submitState:3})})}},{key:"render",value:function render(){if(this.state.submitState===2){return React.createElement("div",null,"This form has already been completed")}else if(this.state.submitState===1){return React.createElement("div",null,"Thank you for submitting the data")}else if(!this.state.InstrumentJSON.Elements){return React.createElement("div",null)}var DirectEntryFormElements=void 0;var buttons=void 0;if(this.state.page===this.state.InstrumentJSON.Elements.length){DirectEntryFormElements=React.createElement(ReviewPage,{reviewData:this.state.ReviewData,submitState:this.state.submitState})}else if(this.state.page>=0){DirectEntryFormElements=React.createElement(_DirectEntryForm2.default,{elements:this.state.InstrumentJSON.Elements[this.state.page].Elements,values:this.state.values,updateAnswer:this.updateAnswer,errors:this.state.errors})}else{DirectEntryFormElements=React.createElement(_DirectEntryForm2.default,{elements:this.state.InstrumentJSON.Elements,values:this.state.values,updateAnswer:this.updateAnswer,errors:this.state.errors})}if(this.state.page===this.state.InstrumentJSON.Elements.length){buttons=React.createElement("div",null,React.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.prevPage},"Prev"),React.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.submit},"Submit"))}else if(this.state.page===-1||this.state.page===0&&this.state.InstrumentJSON.Elements.length===1){buttons=React.createElement("button",{type:"button",className:"btn btn-primary btn-lg"},"Done")}else if(this.state.page===0){buttons=React.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.nextPage},"Next")}else if(this.state.page===this.state.InstrumentJSON.Elements.length-1){buttons=React.createElement("div",null,React.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.prevPage},"Prev"),React.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.nextPage},"Done"))}else{buttons=React.createElement("div",null,React.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.prevPage},"Prev"),React.createElement("button",{type:"button",className:"btn btn-primary btn-lg",onClick:this.nextPage},"Next"))}var style={width:this.state.completionStats.completed/this.state.completionStats.total*100+"%"};return React.createElement("div",null,React.createElement("nav",{className:"navbar navbar-default navbar-fixed-top"},React.createElement("span",_defineProperty({className:"h1"},"className","navbar-brand"),"LORIS")),React.createElement("div",{id:"page",className:"container-fluid"},DirectEntryFormElements,React.createElement("div",{className:"question-container col-xs-12 col-sm-10 col-sm-offset-1"},buttons)),React.createElement("div",{className:"navbar navbar-default navbar-fixed-bottom"},React.createElement("div",{className:"col-xs-5 footer-bar"},this.state.completionStats.completed," of ",this.state.completionStats.total," Answered"),React.createElement("div",{className:"col-xs-4 footer-bar"},React.createElement("div",{className:"progress"},React.createElement("div",{className:"progress-bar-info progress-bar-striped",role:"progressbar","aria-valuenow":"60","aria-valuemin":"0","aria-valuemax":"100",style},"Â ")))))}}]);return DirectEntry}(React.Component);var ReviewPage=function(_React$Component2){_inherits(ReviewPage,_React$Component2);function ReviewPage(props){_classCallCheck(this,ReviewPage);return _possibleConstructorReturn(this,(ReviewPage.__proto__||Object.getPrototypeOf(ReviewPage)).call(this,props))}_createClass(ReviewPage,[{key:"render",value:function render(){var questions=this.props.reviewData.questions.map(function(element){return React.createElement("tr",{className:"reviewPage"},React.createElement("td",null,React.createElement(Markdown,{content:element.question})),React.createElement("td",null,element.response))});var error=void 0;if(this.props.submitState===3){error=React.createElement("h5",{className:"has-error"},"This form has an error, please fix errors before submitting")}return React.createElement("div",{className:"question-container col-xs-12 col-sm-10 col-sm-offset-1"},React.createElement("h3",null,"Review Your Submission"),error,React.createElement("table",{className:"table table-striped table-bordered"},React.createElement("tbody",null,questions)))}}]);return ReviewPage}(React.Component);window.DirectEntry=DirectEntry;exports.default=DirectEntry},101:function(module,exports,__webpack_require__){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _GroupElement=__webpack_require__(102);var _GroupElement2=_interopRequireDefault(_GroupElement);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var NotImplement=function(_React$Component){_inherits(NotImplement,_React$Component);function NotImplement(props){_classCallCheck(this,NotImplement);return _possibleConstructorReturn(this,(NotImplement.__proto__||Object.getPrototypeOf(NotImplement)).call(this,props))}_createClass(NotImplement,[{key:"render",value:function render(){return React.createElement("div",null,this.props.element.Type," is not yet implemented")}}]);return NotImplement}(React.Component);var DirectEntryFormElement=function(_React$Component2){_inherits(DirectEntryFormElement,_React$Component2);function DirectEntryFormElement(props){_classCallCheck(this,DirectEntryFormElement);return _possibleConstructorReturn(this,(DirectEntryFormElement.__proto__||Object.getPrototypeOf(DirectEntryFormElement)).call(this,props))}_createClass(DirectEntryFormElement,[{key:"render",value:function render(){var element=void 0;var errorMessage=void 0;var questionClass="question-container col-xs-12 col-sm-10 col-sm-offset-1";switch(this.props.element.Type){case"select":element=React.createElement(SelectElement,{element:this.props.element,value:this.props.values[this.props.element.Name],updateAnswer:this.props.updateAnswer,error:this.props.errors[this.props.element.Name]});break;case"text":element=React.createElement(TextElement,{element:this.props.element,value:this.props.values[this.props.element.Name],updateAnswer:this.props.updateAnswer,error:this.props.errors[this.props.element.Name]});break;case"date":element=React.createElement(DateElement,{element:this.props.element,value:this.props.values[this.props.element.Name],updateAnswer:this.props.updateAnswer,error:this.props.errors[this.props.element.Name]});break;case"label":element=React.createElement(LabelElement,{element:this.props.element});break;case"header":element=React.createElement(HeaderElement,{element:this.props.element});break;case"ElementGroup":element=React.createElement(_GroupElement2.default,{element:this.props.element,values:this.props.values,updateAnswer:this.props.updateAnswer,errors:this.props.errors});break;default:element=React.createElement(NotImplement,{element:this.props.element})}if(this.props.errors[this.props.element.Name]){questionClass+=" questionError";errorMessage=React.createElement("h4",{className:"col-xs-12 has-error"},"* ",this.props.errors[this.props.element.Name])}return React.createElement("div",{className:questionClass},element,errorMessage)}}]);return DirectEntryFormElement}(React.Component);var Page=function(_React$Component3){_inherits(Page,_React$Component3);function Page(props){_classCallCheck(this,Page);return _possibleConstructorReturn(this,(Page.__proto__||Object.getPrototypeOf(Page)).call(this,props))}_createClass(Page,[{key:"render",value:function render(){var _this4=this;var DirectEntryFormElements=this.props.elements.map(function(element,key){return React.createElement(DirectEntryFormElement,{key,element,values:_this4.props.values,updateAnswer:_this4.props.updateAnswer,errors:_this4.props.errors})});return React.createElement("div",null,DirectEntryFormElements)}}]);return Page}(React.Component);var SelectElement=function(_React$Component4){_inherits(SelectElement,_React$Component4);function SelectElement(props){_classCallCheck(this,SelectElement);var _this5=_possibleConstructorReturn(this,(SelectElement.__proto__||Object.getPrototypeOf(SelectElement)).call(this,props));_this5.state={value:""};return _this5}_createClass(SelectElement,[{key:"onSelect",value:function onSelect(value){if(this.props.value!==value){this.props.updateAnswer(this.props.element.Name,value)}else{this.props.updateAnswer(this.props.element.Name,null)}}},{key:"render",value:function render(){var options=[];var optionLabel=void 0;for(var key in this.props.element.Options.Values){if(this.props.element.Options.Values.hasOwnProperty(key)){var checked=void 0;if(key===""){continue}else if(key===this.props.value){checked=React.createElement("i",{className:"glyphicon glyphicon-ok"})}optionLabel=String(this.props.element.Options.Values[key]);options.push(React.createElement("div",{className:"col-xs-12 col-sm-6 select-option",onClick:this.onSelect.bind(this,key)},React.createElement("div",{className:"selectBox"},React.createElement("label",{className:"btn btn-defualt btn-circle"},checked)),React.createElement("div",{className:"selectOption"},React.createElement(Markdown,{content:optionLabel}))))}}var element=React.createElement("div",{className:"row field_input","data-toggle":"buttons"},options);var classInfo="col-xs-12 field_question";if(this.props.error){classInfo+=" has-error"}var description="";if(!!this.props.element.Description){description=React.createElement("h3",{className:classInfo},React.createElement(Markdown,{content:this.props.element.Description}))}return React.createElement("div",null,description,element)}}]);return SelectElement}(React.Component);var TextElement=function(_React$Component5){_inherits(TextElement,_React$Component5);function TextElement(props){_classCallCheck(this,TextElement);var _this6=_possibleConstructorReturn(this,(TextElement.__proto__||Object.getPrototypeOf(TextElement)).call(this,props));_this6.updateText=_this6.updateText.bind(_this6);return _this6}_createClass(TextElement,[{key:"updateText",value:function updateText(e){this.props.updateAnswer(this.props.element.Name,e.target.value)}},{key:"render",value:function render(){var type=void 0;var value="";if(this.props.value){value=this.props.value}if(this.props.element.Options.Type==="small"){type=React.createElement("input",{name:this.props.element.Name,type:"text",className:"form-control",onChange:this.updateText,value})}else{type=React.createElement("textarea",{name:this.props.element.Name,className:"form-control",onChange:this.updateText,value})}var classInfo="col-xs-12 col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4";var descClass="col-xs-12 field_question";if(this.props.error){classInfo+=" has-error";descClass+=" has-error"}var description="";if(!!this.props.element.Description){description=React.createElement("h3",{className:descClass},React.createElement(Markdown,{content:this.props.element.Description}))}return React.createElement("div",null,description,React.createElement("div",{className:classInfo},type))}}]);return TextElement}(React.Component);var DateElement=function(_React$Component6){_inherits(DateElement,_React$Component6);function DateElement(props){_classCallCheck(this,DateElement);var _this7=_possibleConstructorReturn(this,(DateElement.__proto__||Object.getPrototypeOf(DateElement)).call(this,props));_this7.updateDate=_this7.updateDate.bind(_this7);return _this7}_createClass(DateElement,[{key:"updateDate",value:function updateDate(e){this.props.updateAnswer(this.props.element.Name,e.target.value)}},{key:"componentDidMount",value:function componentDidMount(){var that=this;if(!checkInput(this.props.element.Type)){$("#"+this.props.element.Name).datepicker({dateFormat:"yy-mm-dd",minDate:this.props.element.Options.MinDate,maxDate:this.props.element.Options.MaxDate,changeMonth:true,changeYear:true,yearRange:"-100:+15"}).on("change",function(e){that.updateDate(e)})}}},{key:"render",value:function render(){var value="";if(this.props.value){value=this.props.value}var input=React.createElement("input",{name:this.props.element.Name,type:"date",className:"form-control",min:this.props.element.Options.MinDate,max:this.props.element.Options.MaxDate,onChange:this.updateDate,value});if(!checkInput(this.props.element.Type)){input=React.createElement("input",{name:this.props.element.Name,type:"text",className:"form-control",value:this.props.value,id:this.props.element.Name})}if(this.props.error){classInfo+=" has-error"}var description="";if(!!this.props.element.Description){description=React.createElement("h3",{className:"col-xs-12 field_question"},React.createElement(Markdown,{content:this.props.element.Description}))}return React.createElement("div",null,description,React.createElement("div",{className:"col-xs-12 col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4"},input))}}]);return DateElement}(React.Component);var LabelElement=function(_React$Component7){_inherits(LabelElement,_React$Component7);function LabelElement(props){_classCallCheck(this,LabelElement);return _possibleConstructorReturn(this,(LabelElement.__proto__||Object.getPrototypeOf(LabelElement)).call(this,props))}_createClass(LabelElement,[{key:"render",value:function render(){var description="";if(!!this.props.element.Description){description=React.createElement("h3",{className:"col-xs-12 field_question"},React.createElement(Markdown,{content:this.props.element.Description}))}return React.createElement("div",null,description)}}]);return LabelElement}(React.Component);var HeaderElement=function(_React$Component8){_inherits(HeaderElement,_React$Component8);function HeaderElement(props){_classCallCheck(this,HeaderElement);return _possibleConstructorReturn(this,(HeaderElement.__proto__||Object.getPrototypeOf(HeaderElement)).call(this,props))}_createClass(HeaderElement,[{key:"render",value:function render(){var element=void 0;if(this.props.element.Type=="header"){element=React.createElement("h1",null,React.createElement(Markdown,{content:this.props.element.Description}))}return React.createElement("div",null,element)}}]);return HeaderElement}(React.Component);exports.default=Page},102:function(module,exports,__webpack_require__){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var GroupElement=function(_React$Component){_inherits(GroupElement,_React$Component);function GroupElement(props){_classCallCheck(this,GroupElement);return _possibleConstructorReturn(this,(GroupElement.__proto__||Object.getPrototypeOf(GroupElement)).call(this,props))}_createClass(GroupElement,[{key:"render",value:function render(){var element=void 0;switch(this.props.element.GroupType){case"Element":element=React.createElement(ElementGroup,{element:this.props.element,values:this.props.values,updateAnswer:this.props.updateAnswer,errors:this.props.errors});break}return React.createElement("div",null,element)}}]);return GroupElement}(React.Component);var ElementGroup=function(_React$Component2){_inherits(ElementGroup,_React$Component2);function ElementGroup(props){_classCallCheck(this,ElementGroup);return _possibleConstructorReturn(this,(ElementGroup.__proto__||Object.getPrototypeOf(ElementGroup)).call(this,props))}_createClass(ElementGroup,[{key:"render",value:function render(){var labelClass=void 0;var elementClass=void 0;var elements=void 0;var error=void 0;var errorMessage=void 0;switch(this.props.element.Elements.length){case 1:labelClass="col-xs-12 col-sm-4 field_question";elementClass="col-xs-12 col-sm-8";break;case 2:labelClass="col-xs-12 col-sm-4 field_question";elementClass="col-xs-12 col-sm-4";break;case 3:labelClass="col-xs-12 col-sm-3 field_question";elementClass="col-xs-12 col-sm-3";break;case 4:labelClass="col-xs-12 col-sm-4 field_question";elementClass="col-xs-12 col-sm-2";break;case 5:labelClass="col-xs-12 col-sm-2 field_question";elementClass="col-xs-12 col-sm-2";break}if(this.props.errors[this.props.element.Name]){error=true;labelClass+=" has-error"}elements=this.props.element.Elements.map(function(element){if(!error&&this.props.errors[element.Name]){error=true;errorMessage=this.props.errors[element.Name]}return React.createElement(BaseElement,{element,classInfo:elementClass,value:this.props.values[element.Name],updateAnswer:this.props.updateAnswer,error,errorMessage})}.bind(this));var description="";if(!!this.props.element.Description){description=React.createElement("h3",{className:labelClass},React.createElement(Markdown,{content:this.props.element.Description}))}return React.createElement("div",{className:"col-xs-12"},description,elements)}}]);return ElementGroup}(React.Component);var GroupDateElement=function(_React$Component3){_inherits(GroupDateElement,_React$Component3);function GroupDateElement(props){_classCallCheck(this,GroupDateElement);var _this3=_possibleConstructorReturn(this,(GroupDateElement.__proto__||Object.getPrototypeOf(GroupDateElement)).call(this,props));_this3.updateValue=_this3.updateValue.bind(_this3);return _this3}_createClass(GroupDateElement,[{key:"updateValue",value:function updateValue(e){this.props.updateAnswer(this.props.element.Name,e.target.value)}},{key:"componentDidMount",value:function componentDidMount(){var that=this;if(!checkInput(this.props.element.Type)){$("#"+this.props.element.Name).datepicker({dateFormat:"yy-mm-dd",minDate:this.props.element.Options.MinDate,maxDate:this.props.element.Options.MaxDate,changeMonth:true,changeYear:true,yearRange:"-100:+15"}).on("change",function(e){that.updateValue(e)})}}},{key:"render",value:function render(){var value="";if(this.props.value){value=this.props.value}var input=React.createElement("input",{name:this.props.element.Name,type:"date",className:"form-control",min:this.props.element.Options.MinDate,max:this.props.element.Options.MaxDate,onChange:this.updateValue,value});if(!checkInput(this.props.element.Type)){input=React.createElement("input",{name:this.props.element.Name,type:"text",className:"form-control",value,id:this.props.element.Name})}return React.createElement("div",null,input)}}]);return GroupDateElement}(React.Component);var GroupTimeElement=function(_React$Component4){_inherits(GroupTimeElement,_React$Component4);function GroupTimeElement(props){_classCallCheck(this,GroupTimeElement);var _this4=_possibleConstructorReturn(this,(GroupTimeElement.__proto__||Object.getPrototypeOf(GroupTimeElement)).call(this,props));if(!checkInput(_this4.props.element.Type)){var hour="";var min="";if(_this4.props.value){var val=_this4.props.value.split(":");hour=val[0];min=val[1]}_this4.state={hour,min}}_this4.updateValue=_this4.updateValue.bind(_this4);return _this4}_createClass(GroupTimeElement,[{key:"updateValue",value:function updateValue(e){if(checkInput(this.props.element.Type)){var val=e.target.value!=""?e.target.value:null;this.props.updateAnswer(this.props.element.Name,val)}}},{key:"updateTime",value:function updateTime(unit,e){var val=void 0;if(unit=="hour"){if(e.target.value==""){val=null}else if(this.state.min!=""){val=e.target.value+":"+this.state.min+":00"}this.props.updateAnswer(this.props.element.Name,val);this.setState({hour:e.target.value})}else if(unit=="min"){if(e.target.value==""){val=null}else if(this.state.hour!=""){val=this.state.hour+":"+e.target.value+":00"}this.props.updateAnswer(this.props.element.Name,val);this.setState({min:e.target.value})}}},{key:"render",value:function render(){var input=React.createElement("input",{type:"time",name:this.props.element.Name,className:"form-control",onChange:this.updateValue,value:this.props.value});if(!checkInput(this.props.element.Type)){var hourOptions=[];var minOptions=[];var val=void 0;var i=void 0;hourOptions.push(React.createElement("option",{value:""}));minOptions.push(React.createElement("option",{value:""}));for(i=0;i<24;i++){if(i<10){val="0"+i}else{val=String(i)}hourOptions.push(React.createElement("option",{value:val},val))}for(i=0;i<60;i++){if(i<10){val="0"+i}else{val=String(i)}minOptions.push(React.createElement("option",{value:val},val))}input=React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-4"},React.createElement("select",{className:"form-control",onChange:this.updateTime.bind(this,"hour"),value:this.state.hour},hourOptions)),React.createElement("div",{className:"col-xs-4"},React.createElement("select",{className:"form-control",onChange:this.updateTime.bind(this,"min"),value:this.state.min},minOptions)))}return React.createElement("div",null,input)}}]);return GroupTimeElement}(React.Component);var BaseElement=function(_React$Component5){_inherits(BaseElement,_React$Component5);function BaseElement(props){_classCallCheck(this,BaseElement);var _this5=_possibleConstructorReturn(this,(BaseElement.__proto__||Object.getPrototypeOf(BaseElement)).call(this,props));_this5.updateValue=_this5.updateValue.bind(_this5);return _this5}_createClass(BaseElement,[{key:"updateValue",value:function updateValue(e){this.props.updateAnswer(this.props.element.Name,e.target.value)}},{key:"render",value:function render(){var element=void 0;var classInfo=this.props.classInfo;var value=void 0;var errorMessage=void 0;if(this.props.error){classInfo+=" has-error"}if(this.props.errorMessage){classInfo+=" questionError";errorMessage=React.createElement("div",null,this.props.errorMessage)}switch(this.props.element.Type){case"text":value=this.props.value!=null?this.props.value:"";element=React.createElement("input",{type:"text",name:this.props.element.Name,className:"form-control",onChange:this.updateValue,value});break;case"select":var options=[];value=this.props.value!=null?this.props.value:"";for(var key in this.props.element.Options.Values){if(this.props.element.Options.Values.hasOwnProperty(key)){options.push(React.createElement("option",{value:key},this.props.element.Options.Values[key]))}}element=React.createElement("select",{className:"form-control",onChange:this.updateValue,value},options);break;case"label":var content="";if(!!this.props.value){content=this.props.value}else if(!!this.props.element.Description){content=this.props.element.Description}element=React.createElement(Markdown,{content});break;case"date":element=React.createElement(GroupDateElement,{element:this.props.element,value:this.props.value,updateAnswer:this.props.updateAnswer});break;case"time":value=this.props.value!=null?this.props.value:"";element=React.createElement(GroupTimeElement,{element:this.props.element,value:this.props.value,updateAnswer:this.props.updateAnswer});break;default:element=React.createElement("div",null,this.props.element.Type," is not yet implemented group")}return React.createElement("div",{className:classInfo},element,errorMessage)}}]);return BaseElement}(React.Component);exports.default=GroupElement}});
//# sourceMappingURL=DirectEntry.js.map